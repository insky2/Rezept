<!DOCTYPE html>
<html>
  <head>
    <title>Recipe Scaler</title>
  </head>
  <body>
    <h1>Recipe Scaler</h1>
    <p>Enter the desired serving size:</p>
    <input type="number" id="servings" value="4" min="1">
    <button onclick="scaleRecipe()">Scale Recipe</button>
    <h2>Original Recipe</h2>
    <ul id="original-recipe"></ul>
    <h2>Scaled Recipe</h2>
    <ul id="scaled-recipe"></ul>
    <script>
      function scaleRecipe() {
        // Parse the recipe JSON
        let recipe = {
          servings: 12,
          ingredients: [
            "1 3/4 cups all-purpose flour",
            "3/4 cup unsweetened cocoa powder",
            "1 1/2 teaspoons baking powder",
            "1 1/2 teaspoons baking soda",
            "1 teaspoon salt",
            "2 cups granulated sugar",
            "1/2 cup vegetable oil",
            "2 large eggs",
            "1 teaspoon vanilla extract",
            "1 cup milk",
            "1 cup boiling water"
          ]
        };

        // Get the desired serving size from the input field
        let desiredServings = parseInt(document.getElementById("servings").value);

        // Scale the recipe
        let scaledRecipe = scaleRecipeJSON(recipe, desiredServings);

        // Display the original and scaled recipes
        let originalRecipeList = document.getElementById("original-recipe");
        let scaledRecipeList = document.getElementById("scaled-recipe");
        originalRecipeList.innerHTML = "";
        scaledRecipeList.innerHTML = "";
        recipe.ingredients.forEach((ingredient) => {
          let li = document.createElement("li");
          li.textContent = ingredient;
          originalRecipeList.appendChild(li);
        });
        scaledRecipe.ingredients.forEach((ingredient) => {
          let li = document.createElement("li");
          li.textContent = ingredient;
          scaledRecipeList.appendChild(li);
        });
      }

      function scaleRecipeJSON(recipe, desiredServings) {
        // Parse the ingredient amounts and units from the recipe object
        let ingredients = recipe.ingredients.map((ingredient) => {
          let [amount, unit, ...name] = ingredient.split(' ');
          amount = eval(amount); // Evaluate any fractions in the amount string
          return { amount, unit, name: name.join(' ') };
        });

        // Calculate the scaling factor based on the desired serving size and the recipe's serving size
        let scalingFactor = desiredServings / recipe.servings;

        // Scale the ingredient amounts and round them to the nearest whole number
        ingredients = ingredients.map((ingredient) => {
          ingredient.amount *= scalingFactor;
          ingredient.amount = Math.round(ingredient.amount);
          return ingredient;
        });

        // Format the ingredients as strings and return the scaled recipe object
        return {
          servings: desiredServings,
          ingredients: ingredients.map((ingredient) => {
            return `${ingredient.amount} ${ingredient.unit} ${ingredient.name}`;
          }),
        };
      }
    </script>
  </body>
</html>
